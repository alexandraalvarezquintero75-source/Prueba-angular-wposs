<div class="form-wrapper">
  <h2 class="form-title">
    {{ isEditMode ? "Editar Producto" : "Nuevo Producto" }}
  </h2>

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">

    <div class="form-row">
      <mat-form-field appearance="outline" class="flex-2">
        <mat-label>Título del Producto</mat-label>
        <input matInput formControlName="title" placeholder="Titulo" />
        <mat-error *ngIf="productForm.get('title')?.hasError('required')">Requerido</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Precio</mat-label>
        <input matInput type="number" formControlName="price" />
        <span matPrefix>$&nbsp;</span>
      </mat-form-field>

      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Categoría</mat-label>
        <mat-select formControlName="categoryId">
          <mat-option *ngFor="let cat of categories" [value]="cat.id">
            {{ cat.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="form-row full-width">
      <mat-form-field appearance="outline">
        <mat-label>Descripción</mat-label>
        <textarea matInput formControlName="description" rows="3"></textarea>
        <mat-error *ngIf="productForm.get('description')?.hasError('required')">La descripción es obligatoria</mat-error>
      </mat-form-field>
    </div>

    <div class="form-actions">
      <button mat-stroked-button type="button" routerLink="/admin/products">
        Cancelar
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="productForm.invalid">
        {{ isEditMode ? "Guardar Cambios" : "Crear Producto" }}
      </button>
    </div>
  </form>
</div>
